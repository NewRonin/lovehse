generator client {
  provider = "prisma-client-js"
  engineType = "library" 
}

datasource db {
  provider = "mysql"
}

model participant {
  id        String   @id @db.Char(36)
  name      String
  createdAt DateTime @default(now())
  vote      vote[]

  @@index([name], map: "Participant_name_idx")
}

model ticket {
  id        String   @id @db.Char(36)
  number    String   @unique(map: "Ticket_number_key") @db.VarChar(64)
  createdAt DateTime @default(now())
  vote      vote?

  @@index([number], map: "Ticket_number_idx")
}

model vote {
  id            String      @id @db.Char(36)
  ticketId      String      @unique(map: "Vote_ticketId_key") @db.Char(36)
  participantId String      @db.Char(36)
  createdAt     DateTime    @default(now())
  participant   participant @relation(fields: [participantId], references: [id], map: "Vote_participantId_fkey")
  ticket        ticket      @relation(fields: [ticketId], references: [id], onDelete: Cascade, map: "Vote_ticketId_fkey")

  @@index([participantId], map: "Vote_participantId_idx")
}
